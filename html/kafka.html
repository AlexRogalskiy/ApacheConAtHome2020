<html>
<head>
<title>NiFi Web Page For Kafka</title>
<body bgcolor="white" text="black">

Receiving Updated Kafka Data:
<br><br>
<div id="results"> </div>

<br><br>

<script>

var wsUri = "ws://edge2ai-1.dim.local:9091/test";

websocket = new WebSocket(wsUri);
websocket.onopen = function(evt) {console.log('connected')};
websocket.onerror = function(evt) {console.log('ERR', evt)};
websocket.onmessage = function(evt) {
    console.log(evt)
    var dataPoints = JSON.parse(evt.data);

    var output = document.getElementById("results");
    var dataBuffer = "<p>";
 
    for(var i=0;i<dataPoints.length;i++)
    {
        dataBuffer += "Location: " + dataPoints[i].location +
                      dataPoints[i].station_id  + "@" +  dataPoints[i].latitude   + ":" +
                      dataPoints[i].longitude  + "@" +  dataPoints[i].observation_time +
                      dataPoints[i].temperature_string + "," + dataPoints[i].relative_humidity + "," +
                      dataPoints[i].wind_string +"<br>";

    }   
    output.innerHTML = outputInnerHTML +  dataBuffer + "</p><br>";
};

</script>

&copy; 2020 Tim Spann
</body>
</html>
